function Fib.fib 1

// if argument 0 is 0 we just return 0
push argument 0
push constant 0
eq
if-goto ZERO

push argument 0
push constant 1
eq
if-goto ONE

// iterating over
push constant 1
pop local 0


push constant 0
pop temp 2
push constant 1
pop temp 3

push argument 0
push constant 1
sub
pop temp 4


label LOOP
	push temp 4
	push constant 0
	eq
	if-goto END // if we are out of range

	push temp 2
	push temp 3
	add
	pop local 0

	push temp 3
	pop temp 2

	push local 0
	pop temp 3

	push temp 4
	push constant 1
	sub
	pop temp 4

	goto LOOP


label ZERO
	push constant 0
	pop local 0
	goto END


label ONE
	push constant 1
	pop local 0
	goto END

label END
	push local 0
	return
